<!DOCTYPE html>
<html>

<head>
    <title>Device Simulator</title>
    <style>
        #device-svg {
            width: 80%;
            height: auto;
            display: block;
            margin: 0 auto;
            max-width: 800px;
        }

        #input-container {
            position: absolute; /* Position absolutely within the container */
            top: 35%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 10; /* Ensure it's on top of the SVG */
        }

        #input-container input,
        #input-container textarea {
            width: 85%;
            margin: 10px 0;
            font-size: 2.5em;
            font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
        }

        #deviceScreen {
            cursor: pointer ;
            /* Make the screen area look like an input */
        }

        #device-container {
            position: relative; /* Make the container relative */
            display: flex;
            justify-content: center;
            align-items: center;
            /* height: 100vh; */
        }
    </style>
</head>

<body>

    <div id="device-container">

<!-- device SVG goes below  make sure svg id="device-svg"-->

<svg id="device-svg"  viewBox="0 0 264.58334 385.60095" version="1.1"
    inkscape:export-filename="esmo-simulator3.png" inkscape:export-xdpi="300" inkscape:export-ydpi="300"
    sodipodi:docname="esmo-simulator3.svg" inkscape:version="1.4 (e7c3feb100, 2024-10-09)"
    xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
    xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">
    <sodipodi:namedview id="namedview1" pagecolor="#ffffff" bordercolor="#000000" borderopacity="0.25"
        inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0"
        inkscape:deskcolor="#d1d1d1" inkscape:document-units="mm" inkscape:zoom="2.6645502" inkscape:cx="134.91958"
        inkscape:cy="207.91502" inkscape:window-width="2560" inkscape:window-height="1316" inkscape:window-x="0"
        inkscape:window-y="0" inkscape:window-maximized="1" inkscape:current-layer="layer4">
        <inkscape:page x="0" y="0" width="264.58334" height="385.60095" id="page2" margin="0" bleed="0" />
    </sodipodi:namedview>
    <defs id="defs1">
        <linearGradient id="linearGradient6" inkscape:collect="always">
            <stop style="stop-color:#535351;stop-opacity:1;" offset="0" id="stop6" />
            <stop style="stop-color:#171818;stop-opacity:1;" offset="1" id="stop7" />
        </linearGradient>
        <linearGradient inkscape:collect="always" xlink:href="#linearGradient6" id="linearGradient7-3-9" x1="85.052299"
            y1="76.041924" x2="146.0459" y2="92.385117" gradientUnits="userSpaceOnUse"
            gradientTransform="matrix(1,0,0,-1,69.213219,194.79228)" />
        <inkscape:path-effect effect="fillet_chamfer" id="path-effect9-2" is_visible="true" lpeversion="1"
            nodesatellites_param="F,0,0,1,0,0.79374998,0,1 @ F,0,0,1,0,0.79374998,0,1 @ F,0,0,1,0,0.79374998,0,1 @ F,0,0,1,0,0.79374998,0,1"
            radius="3" unit="px" method="auto" mode="F" chamfer_steps="1" flexible="false" use_knot_distance="true"
            apply_no_radius="true" apply_with_radius="true" only_selected="false" hide_knots="false" />
        <linearGradient inkscape:collect="always" xlink:href="#linearGradient6" id="linearGradient16" x1="70.421478"
            y1="139.25224" x2="139.57848" y2="139.25224" gradientUnits="userSpaceOnUse"
            gradientTransform="matrix(3.5047718,0,0,3.5047718,74.81713,84.241349)" />
        <linearGradient inkscape:collect="always" xlink:href="#linearGradient6" id="linearGradient7-3-9-3"
            x1="85.052299" y1="76.041924" x2="146.0459" y2="92.385117" gradientUnits="userSpaceOnUse"
            gradientTransform="translate(69.213219,84.770576)" />
        <inkscape:path-effect effect="fillet_chamfer" id="path-effect9-2-4" is_visible="true" lpeversion="1"
            nodesatellites_param="F,0,0,1,0,0.79374998,0,1 @ F,0,0,1,0,0.79374998,0,1 @ F,0,0,1,0,0.79374998,0,1 @ F,0,0,1,0,0.79374998,0,1"
            radius="3" unit="px" method="auto" mode="F" chamfer_steps="1" flexible="false" use_knot_distance="true"
            apply_no_radius="true" apply_with_radius="true" only_selected="false" hide_knots="false" />
    </defs>
    <g inkscape:groupmode="layer" id="layer4" inkscape:label="DeviceBase" transform="translate(-67.132622,-84.241363)">
        <rect
            style="fill:#04851a;fill-opacity:1;stroke:none;stroke-width:16.7603;stroke-linecap:square;paint-order:markers stroke fill"
            id="rect16-40" width="21.918812" height="51.482918" x="309.79715" y="325.1904" rx="14.019067" ry="7.0095439"
            inkscape:label="button4" />
        <rect
            style="fill:#e2c271;fill-opacity:1;stroke:none;stroke-width:16.7603;stroke-linecap:square;paint-order:markers stroke fill"
            id="rect16" width="21.918812" height="51.482918" x="309.79715" y="155.68228" rx="14.019067" ry="7.0095439"
            inkscape:label="button3" />
        <rect
            style="fill:#370f72;fill-opacity:1;stroke:none;stroke-width:16.7603;stroke-linecap:square;paint-order:markers stroke fill"
            id="rect16-4-5" width="21.918854" height="51.482918" x="67.566925" y="325.1904" rx="14.019094"
            ry="7.0095439" inkscape:label="button2" />
        <rect
            style="fill:#c44238;fill-opacity:1;stroke:none;stroke-width:17.0887;stroke-linecap:square;stroke-dasharray:none;paint-order:markers stroke fill"
            id="rect16-4" width="22.787455" height="51.482918" x="67.132622" y="155.68228" rx="14.574642" ry="7.0095439"
            inkscape:label="button1" />
        <path id="rect2-7-8"
            style="fill:url(#linearGradient7-3-9);fill-opacity:1;stroke:none;stroke-width:1.61114;stroke-linecap:square;paint-order:markers stroke fill"
            d="m 81.617506,194.79227 45.635674,-0.0852 a 2.2189523,2.2189523 160.21015 0 0 1.40647,-0.50607 l 6.05774,-4.98878 a 0.28477175,0.28477175 70.26366 0 0 -0.18103,-0.50459 H 75.274093 a 0.31920069,0.31920069 111.90716 0 0 -0.22099,0.54953 l 5.197894,4.9871 a 1.9684897,1.9684897 21.853655 0 0 1.366509,0.54805 z"
            sodipodi:nodetypes="ccccc" inkscape:path-effect="#path-effect9-2"
            inkscape:original-d="m 80.823757,194.79375 47.223173,-0.0882 7.28318,-5.99796 H 74.480343 Z"
            transform="matrix(3.5047719,0,0,-3.5047719,-167.75941,766.94384)" inkscape:label="upperBase" />
        <path id="rect2-7-8-5"
            style="fill:url(#linearGradient7-3-9-3);fill-opacity:1;stroke:none;stroke-width:1.61114;stroke-linecap:square;paint-order:markers stroke fill"
            d="m 81.617506,194.79227 45.635674,-0.0852 a 2.2189523,2.2189523 160.21015 0 0 1.40647,-0.50607 l 6.05774,-4.98878 a 0.28477175,0.28477175 70.26366 0 0 -0.18103,-0.50459 H 75.274093 a 0.31920069,0.31920069 111.90716 0 0 -0.22099,0.54953 l 5.197894,4.9871 a 1.9684897,1.9684897 21.853655 0 0 1.366509,0.54805 z"
            sodipodi:nodetypes="ccccc" inkscape:path-effect="#path-effect9-2-4"
            inkscape:original-d="m 80.823757,194.79375 47.223173,-0.0882 7.28318,-5.99796 H 74.480343 Z"
            transform="matrix(3.5047719,0,0,3.5047719,-167.75941,-212.86018)" inkscape:label="lowerBase" />
        <rect
            style="fill:url(#linearGradient16);stroke:none;stroke-width:10.5143;stroke-linecap:square;paint-order:markers stroke fill"
            id="rect1" width="242.3795" height="346.65927" x="78.659393" y="103.71218" rx="17.523859" ry="17.523859"
            inkscape:label="deviceBase" />
        <rect
            style="fill:#c8c8c8;fill-opacity:1;stroke-width:10.3195;stroke-linecap:square;paint-order:markers stroke fill"
            id="rect7" width="212.57462" height="287.64005" x="93.561852" y="122.80305" rx="17.523859" ry="17.523859"
            inkscape:label="deviceScreen" />
        <rect
            style="fill:#343435;fill-opacity:1;stroke:#0b0c0b;stroke-width:0.927304;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers stroke fill"
            id="rect16-40-2" width="20.591709" height="51.482918" x="418.22787" y="-225.59061" rx="7.0095439"
            ry="7.0095439" inkscape:label="frontButton" transform="rotate(90)" />
    </g>
</svg>

<!-- end device-svg -->


        <div id="input-container">
            <input type="text" id="usernameInput" placeholder="Username" />
            <textarea id="messageInput" placeholder="Message"></textarea>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const svgDoc = document.getElementById('device-svg');
            const inputContainer = document.getElementById('input-container');

            function setInputContainerWidth() {
                if (svgDoc && inputContainer) {
                    const svgWidth = svgDoc.offsetWidth;
                    inputContainer.style.width = (svgWidth * 0.7) + 'px'; // 70% of svg width
                }
            }

        setInputContainerWidth(); // Set initial width

        window.addEventListener('resize', setInputContainerWidth); // Update on resize

        document.addEventListener('DOMContentLoaded', function () {
            const svgDoc = document.getElementById('device-svg');

            if (svgDoc) {
                svgDoc.addEventListener('click', function (event) {
                    const target = event.target;
                    const label = target.getAttribute('inkscape:label');

                    if (label === 'button1') {
                        sendApiRequest('Fall Alert', 'John Doe');
                    } else if (label === 'button2') {
                        sendApiRequest('Biometric Irregularity Alert', 'Maria Garcia');
                    } else if (label === 'button3') {
                        sendApiRequest('Load Sensor Alert', 'Robbie Edwards');
                    } else if (label === 'button4') {
                        sendApiRequest('Manual SOS', 'Asher Safvi');
                    } else if (label === 'frontButton') {
                        const username = document.getElementById('usernameInput').value;
                        const message = document.getElementById('messageInput').value;
                        if (username && message) {
                            sendApiRequest(message, username);
                        } else {
                            alert("Please enter a username and message.");
                        }
                    }
                });
            }
        });

        function sendApiRequest(msg, username) {
            if (!msg || !username) {
                alert("Message and username are required.");
                return;
            }

            const timestamp = new Date().toISOString();

            const data = {
                trigger: 1,
                msg: msg,
                username: username,
                timestamp: timestamp
            };

            fetch('https://67dc7a98e00db03c40683241.mockapi.io/alarms/1', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
                .then(response => response.json())
                .then(responseData => {
                    console.log('API Response:', responseData);
                    alert('API request sent successfully!' + username + msg);
                })
                .catch(error => {
                    console.error('API Error:', error);
                    alert('API request failed. Check console.');
                });
        }
    </script>
</body>

</html>